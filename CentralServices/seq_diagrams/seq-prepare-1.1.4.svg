<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1342px" preserveAspectRatio="none" style="width:1885px;height:1342px;" version="1.1" viewBox="0 0 1885 1342" width="1885px" zoomAndPan="magnify"><defs><filter height="300%" id="fhz7vfmzydarh" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="370" x="758.75" y="23.5352">1.1.4. Send notification to Participant (Payer/Payee)</text><rect fill="#D3D3D3" height="1297.2246" style="stroke: #A80036; stroke-width: 1.0;" width="179" x="4" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="173" x="7" y="47.0566">Financial Service Provider</text><rect fill="#ADD8E6" height="1297.2246" style="stroke: #A80036; stroke-width: 1.0;" width="241" x="370" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="157" x="412" y="47.0566">ML API Adapter Service</text><rect fill="#FFFFE0" height="1297.2246" style="stroke: #A80036; stroke-width: 1.0;" width="862" x="986.5" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="1367" y="47.0566">Central Service</text><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="1054.9609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="485.5" y="163.7754"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="147.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1052.5" y="317.3281"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="147.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1052.5" y="500.8809"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="147.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1052.5" y="805.3203"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="147.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1052.5" y="1013.1836"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1203" y="233.707"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1203" y="721.6992"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="88.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1372.5" y="346.6387"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="88.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1372.5" y="834.6309"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="88.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1481.5" y="530.1914"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="88.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1481.5" y="1042.4941"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1791.5" y="375.9492"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1791.5" y="559.502"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1791.5" y="863.9414"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1791.5" y="1071.8047"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="1040.9609" style="stroke: #000000; stroke-width: 2.0;" width="1850.5" x="24" y="170.7754"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="1009.6504" style="stroke: #000000; stroke-width: 2.0;" width="1830.5" x="34" y="195.0859"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="193.8633" style="stroke: #000000; stroke-width: 2.0;" width="1490.5" x="364" y="278.707"/><rect fill="#FFFFFF" height="519.3027" style="stroke: none; stroke-width: 1.0;" width="1830.5" x="34" y="685.4336"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="193.8633" style="stroke: #000000; stroke-width: 2.0;" width="1490.5" x="364" y="766.6992"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="223.1738" style="stroke: #000000; stroke-width: 2.0;" width="1810.5" x="44" y="974.5625"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="93" x2="93" y1="153.7754" y2="1228.7363"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="490" x2="490" y1="153.7754" y2="1228.7363"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1057.5" x2="1057.5" y1="153.7754" y2="1228.7363"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1207.5" x2="1207.5" y1="153.7754" y2="1228.7363"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1377.5" x2="1377.5" y1="153.7754" y2="1228.7363"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1486.5" x2="1486.5" y1="153.7754" y2="1228.7363"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1796.5" x2="1796.5" y1="153.7754" y2="1228.7363"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="64" y="134.334">DFSP(n)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="54" y="150.8223">Participant</text><ellipse cx="93.5" cy="63.7988" fill="#FEFECE" filter="url(#fhz7vfmzydarh)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M93.5,71.7988 L93.5,98.7988 M80.5,79.7988 L106.5,79.7988 M93.5,98.7988 L80.5,113.7988 M93.5,98.7988 L106.5,113.7988 " fill="none" filter="url(#fhz7vfmzydarh)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="64" y="1241.2715">DFSP(n)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="54" y="1257.7598">Participant</text><ellipse cx="93.5" cy="1270.7129" fill="#FEFECE" filter="url(#fhz7vfmzydarh)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M93.5,1278.7129 L93.5,1305.7129 M80.5,1286.7129 L106.5,1286.7129 M93.5,1305.7129 L80.5,1320.7129 M93.5,1305.7129 L106.5,1320.7129 " fill="none" filter="url(#fhz7vfmzydarh)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="227" x="374" y="150.8223">ML API Notification Event Handler</text><ellipse cx="490.5" cy="121.2871" fill="#FEFECE" filter="url(#fhz7vfmzydarh)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="486.5,109.2871,492.5,104.2871,490.5,109.2871,492.5,114.2871,486.5,109.2871" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="227" x="374" y="1241.2715">ML API Notification Event Handler</text><ellipse cx="490.5" cy="1260.2246" fill="#FEFECE" filter="url(#fhz7vfmzydarh)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="486.5,1248.2246,492.5,1243.2246,490.5,1248.2246,492.5,1253.2246,486.5,1248.2246" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="990.5" y="150.8223">Central Service API</text><path d="M1037,109.2871 L1037,133.2871 M1037,121.2871 L1054,121.2871 " fill="none" filter="url(#fhz7vfmzydarh)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="1066" cy="121.2871" fill="#FEFECE" filter="url(#fhz7vfmzydarh)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="990.5" y="1241.2715">Central Service API</text><path d="M1037,1248.2246 L1037,1272.2246 M1037,1260.2246 L1054,1260.2246 " fill="none" filter="url(#fhz7vfmzydarh)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="1066" cy="1260.2246" fill="#FEFECE" filter="url(#fhz7vfmzydarh)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#fhz7vfmzydarh)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="1138.5" y="114.2871"/><rect fill="#FEFECE" filter="url(#fhz7vfmzydarh)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="1134.5" y="118.2871"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="1141.5" y="138.8223">Notification-Topic</text><rect fill="#FEFECE" filter="url(#fhz7vfmzydarh)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="1138.5" y="1227.7363"/><rect fill="#FEFECE" filter="url(#fhz7vfmzydarh)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="1134.5" y="1231.7363"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="1141.5" y="1252.2715">Notification-Topic</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="1338.5" y="150.8223">Event DAO</text><ellipse cx="1377.5" cy="121.2871" fill="#FEFECE" filter="url(#fhz7vfmzydarh)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1365.5" x2="1389.5" y1="135.2871" y2="135.2871"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="1338.5" y="1241.2715">Event DAO</text><ellipse cx="1377.5" cy="1260.2246" fill="#FEFECE" filter="url(#fhz7vfmzydarh)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1365.5" x2="1389.5" y1="1274.2246" y2="1274.2246"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="1426.5" y="150.8223">Notification DAO</text><ellipse cx="1486.5" cy="121.2871" fill="#FEFECE" filter="url(#fhz7vfmzydarh)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1474.5" x2="1498.5" y1="135.2871" y2="135.2871"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="1426.5" y="1241.2715">Notification DAO</text><ellipse cx="1486.5" cy="1260.2246" fill="#FEFECE" filter="url(#fhz7vfmzydarh)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1474.5" x2="1498.5" y1="1274.2246" y2="1274.2246"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1748.5" y="150.8223">Central Store</text><path d="M1778.5,101.2871 C1778.5,91.2871 1796.5,91.2871 1796.5,91.2871 C1796.5,91.2871 1814.5,91.2871 1814.5,101.2871 L1814.5,127.2871 C1814.5,137.2871 1796.5,137.2871 1796.5,137.2871 C1796.5,137.2871 1778.5,137.2871 1778.5,127.2871 L1778.5,101.2871 " fill="#FEFECE" filter="url(#fhz7vfmzydarh)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1778.5,101.2871 C1778.5,111.2871 1796.5,111.2871 1796.5,111.2871 C1796.5,111.2871 1814.5,111.2871 1814.5,101.2871 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1748.5" y="1241.2715">Central Store</text><path d="M1778.5,1254.2246 C1778.5,1244.2246 1796.5,1244.2246 1796.5,1244.2246 C1796.5,1244.2246 1814.5,1244.2246 1814.5,1254.2246 L1814.5,1280.2246 C1814.5,1290.2246 1796.5,1290.2246 1796.5,1290.2246 C1796.5,1290.2246 1778.5,1290.2246 1778.5,1280.2246 L1778.5,1254.2246 " fill="#FEFECE" filter="url(#fhz7vfmzydarh)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1778.5,1254.2246 C1778.5,1264.2246 1796.5,1264.2246 1796.5,1264.2246 C1796.5,1264.2246 1814.5,1264.2246 1814.5,1254.2246 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="1054.9609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="485.5" y="163.7754"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="147.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1052.5" y="317.3281"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="147.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1052.5" y="500.8809"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="147.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1052.5" y="805.3203"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="147.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1052.5" y="1013.1836"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1203" y="233.707"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1203" y="721.6992"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="88.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1372.5" y="346.6387"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="88.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1372.5" y="834.6309"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="88.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1481.5" y="530.1914"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="88.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1481.5" y="1042.4941"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1791.5" y="375.9492"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1791.5" y="559.502"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1791.5" y="863.9414"/><rect fill="#FFFFFF" filter="url(#fhz7vfmzydarh)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1791.5" y="1071.8047"/><path d="M24,170.7754 L276,170.7754 L276,177.7754 L266,187.7754 L24,187.7754 L24,170.7754 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1040.9609" style="stroke: #000000; stroke-width: 2.0;" width="1850.5" x="24" y="170.7754"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="207" x="39" y="184.3438">Send notification to Participant</text><path d="M34,195.0859 L96,195.0859 L96,202.0859 L86,212.0859 L34,212.0859 L34,195.0859 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1009.6504" style="stroke: #000000; stroke-width: 2.0;" width="1830.5" x="34" y="195.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="49" y="208.6543">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="149" x="111" y="207.7207">[Consume Single Message]</text><polygon fill="#A80036" points="1191,229.707,1201,233.707,1191,237.707,1195,233.707" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="495.5" x2="1197" y1="233.707" y2="233.707"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="502.5" y="228.9648">1</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="186" x="515.5" y="228.9648">Consume Notification event</text><path d="M364,278.707 L579,278.707 L579,285.707 L569,295.707 L364,295.707 L364,278.707 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="193.8633" style="stroke: #000000; stroke-width: 2.0;" width="1490.5" x="364" y="278.707"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="170" x="379" y="292.2754">Persist Event Information</text><polygon fill="#A80036" points="1040.5,313.3281,1050.5,317.3281,1040.5,321.3281,1044.5,317.3281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="495.5" x2="1046.5" y1="317.3281" y2="317.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="502.5" y="312.5859">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="393" x="515.5" y="312.5859">Request to persist event information - POST - HTTP://events/</text><polygon fill="#A80036" points="1360.5,342.6387,1370.5,346.6387,1360.5,350.6387,1364.5,346.6387" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1062.5" x2="1366.5" y1="346.6387" y2="346.6387"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1069.5" y="341.8965">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="230" x="1082.5" y="341.8965">Request to persist event information</text><polygon fill="#A80036" points="1779.5,371.9492,1789.5,375.9492,1779.5,379.9492,1783.5,375.9492" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1382.5" x2="1785.5" y1="375.9492" y2="375.9492"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1389.5" y="371.207">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="1402.5" y="371.207">Persist event information</text><polygon fill="#A80036" points="1073.5,431.2598,1063.5,435.2598,1073.5,439.2598,1069.5,435.2598" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1067.5" x2="1376.5" y1="435.2598" y2="435.2598"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1079.5" y="430.5176">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="1092.5" y="430.5176">Return success</text><polygon fill="#A80036" points="506.5,460.5703,496.5,464.5703,506.5,468.5703,502.5,464.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="500.5" x2="1056.5" y1="464.5703" y2="464.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="512.5" y="459.8281">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="525.5" y="459.8281">Return success</text><polygon fill="#A80036" points="1040.5,496.8809,1050.5,500.8809,1040.5,504.8809,1044.5,500.8809" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="495.5" x2="1046.5" y1="500.8809" y2="500.8809"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="502.5" y="496.1387">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="509" x="515.5" y="496.1387">Request Notification details for Participant - GET - HTTP://notifications/DFSP(n)</text><polygon fill="#A80036" points="1469.5,526.1914,1479.5,530.1914,1469.5,534.1914,1473.5,530.1914" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1062.5" x2="1475.5" y1="530.1914" y2="530.1914"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1069.5" y="525.4492">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="1082.5" y="525.4492">Fetch Notification details for Participant</text><polygon fill="#A80036" points="1779.5,555.502,1789.5,559.502,1779.5,563.502,1783.5,559.502" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1491.5" x2="1785.5" y1="559.502" y2="559.502"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1498.5" y="554.7598">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="1511.5" y="554.7598">Fetch Notification details for Participant</text><polygon fill="#A80036" points="1073.5,614.8125,1063.5,618.8125,1073.5,622.8125,1069.5,618.8125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1067.5" x2="1485.5" y1="618.8125" y2="618.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1079.5" y="614.0703">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="259" x="1101.5" y="614.0703">Return Notification details for Participant</text><polygon fill="#A80036" points="506.5,644.123,496.5,648.123,506.5,652.123,502.5,648.123" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="500.5" x2="1056.5" y1="648.123" y2="648.123"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="512.5" y="643.3809">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="259" x="534.5" y="643.3809">Return Notification details for Participant</text><polygon fill="#A80036" points="104.5,673.4336,94.5,677.4336,104.5,681.4336,100.5,677.4336" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="98.5" x2="484.5" y1="677.4336" y2="677.4336"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="110.5" y="672.6914">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="300" x="132.5" y="672.6914">HTTP Callback with Prepare result to Participant</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="34" x2="1864.5" y1="686.4336" y2="686.4336"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="151" x="39" y="697.0684">[Consume Batch Messages]</text><polygon fill="#A80036" points="1191,717.6992,1201,721.6992,1191,725.6992,1195,721.6992" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="495.5" x2="1197" y1="721.6992" y2="721.6992"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="502.5" y="716.957">13</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="423" x="524.5" y="716.957">Consume Notifications event batch of messages for Participant</text><path d="M364,766.6992 L621,766.6992 L621,773.6992 L611,783.6992 L364,783.6992 L364,766.6992 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="193.8633" style="stroke: #000000; stroke-width: 2.0;" width="1490.5" x="364" y="766.6992"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="212" x="379" y="780.2676">Persist batch Event Information</text><polygon fill="#A80036" points="1040.5,801.3203,1050.5,805.3203,1040.5,809.3203,1044.5,805.3203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="495.5" x2="1046.5" y1="805.3203" y2="805.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="502.5" y="800.5781">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="432" x="524.5" y="800.5781">Request to persist batch event information - POST - HTTP://events/</text><polygon fill="#A80036" points="1360.5,830.6309,1370.5,834.6309,1360.5,838.6309,1364.5,834.6309" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1062.5" x2="1366.5" y1="834.6309" y2="834.6309"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1069.5" y="829.8887">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="269" x="1091.5" y="829.8887">Request to persist batch event information</text><polygon fill="#A80036" points="1779.5,859.9414,1789.5,863.9414,1779.5,867.9414,1783.5,863.9414" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1382.5" x2="1785.5" y1="863.9414" y2="863.9414"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1389.5" y="859.1992">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="1411.5" y="859.1992">Persist event information</text><polygon fill="#A80036" points="1073.5,919.252,1063.5,923.252,1073.5,927.252,1069.5,923.252" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1067.5" x2="1376.5" y1="923.252" y2="923.252"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1079.5" y="918.5098">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="1101.5" y="918.5098">Return success</text><polygon fill="#A80036" points="506.5,948.5625,496.5,952.5625,506.5,956.5625,502.5,952.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="500.5" x2="1056.5" y1="952.5625" y2="952.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="512.5" y="947.8203">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="534.5" y="947.8203">Return success</text><path d="M44,974.5625 L118,974.5625 L118,981.5625 L108,991.5625 L44,991.5625 L44,974.5625 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="223.1738" style="stroke: #000000; stroke-width: 2.0;" width="1810.5" x="44" y="974.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="59" y="988.1309">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="155" x="133" y="987.1973">[for each message in batch]</text><polygon fill="#A80036" points="1040.5,1009.1836,1050.5,1013.1836,1040.5,1017.1836,1044.5,1013.1836" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="495.5" x2="1046.5" y1="1013.1836" y2="1013.1836"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="502.5" y="1008.4414">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="516" x="524.5" y="1008.4414">Request Notifications details for Participant - GET - HTTP://notifications/DFPS(n)</text><polygon fill="#A80036" points="1469.5,1038.4941,1479.5,1042.4941,1469.5,1046.4941,1473.5,1042.4941" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1062.5" x2="1475.5" y1="1042.4941" y2="1042.4941"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1069.5" y="1037.752">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="259" x="1091.5" y="1037.752">Fetch Notifications details for Participant</text><polygon fill="#A80036" points="1779.5,1067.8047,1789.5,1071.8047,1779.5,1075.8047,1783.5,1071.8047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1491.5" x2="1785.5" y1="1071.8047" y2="1071.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1498.5" y="1067.0625">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="259" x="1520.5" y="1067.0625">Fetch Notifications details for Participant</text><polygon fill="#A80036" points="1073.5,1127.1152,1063.5,1131.1152,1073.5,1135.1152,1069.5,1131.1152" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1067.5" x2="1485.5" y1="1131.1152" y2="1131.1152"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1079.5" y="1126.373">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="266" x="1101.5" y="1126.373">Return Notifications details for Participant</text><polygon fill="#A80036" points="506.5,1156.4258,496.5,1160.4258,506.5,1164.4258,502.5,1160.4258" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="500.5" x2="1056.5" y1="1160.4258" y2="1160.4258"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="512.5" y="1155.6836">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="266" x="534.5" y="1155.6836">Return Notifications details for Participant</text><polygon fill="#A80036" points="104.5,1185.7363,94.5,1189.7363,104.5,1193.7363,100.5,1189.7363" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="98.5" x2="484.5" y1="1189.7363" y2="1189.7363"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="110.5" y="1184.9941">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="300" x="132.5" y="1184.9941">HTTP Callback with Prepare result to Participant</text><!--
@startuml
title 1.1.4. Send notification to Participant (Payer/Payee)

autonumber


actor "DFSP(n)\nParticipant" as DFSP
control "ML API Notification Event Handler" as NOTIFY_HANDLER
boundary "Central Service API" as CSAPI
collections "Notification-Topic" as TOPIC_NOTIFICATIONS
entity "Event DAO" as EVENT_DAO
entity "Notification DAO" as NOTIFY_DAO
database "Central Store" as DB

box "Financial Service Provider" #lightGray
	participant DFSP
end box

box "ML API Adapter Service" #LightBlue
	participant NOTIFY_HANDLER
end box

box "Central Service" #LightYellow
    participant CSAPI
    participant TOPIC_NOTIFICATIONS
    participant EVENT_DAO
    participant NOTIFY_DAO
    participant DB
end box

activate NOTIFY_HANDLER
group Send notification to Participant
    alt Consume Single Message
        TOPIC_NOTIFICATIONS <- NOTIFY_HANDLER: <color #FF0000>**Consume Notification event**</color>
        activate TOPIC_NOTIFICATIONS
        deactivate TOPIC_NOTIFICATIONS

        group Persist Event Information
            NOTIFY_HANDLER -> CSAPI: Request to persist event information - POST - HTTP://events/
            activate CSAPI
            CSAPI -> EVENT_DAO: Request to persist event information
            activate EVENT_DAO
            EVENT_DAO -> DB: Persist event information
            activate DB
            deactivate DB
            EVENT_DAO - -> CSAPI: Return success
            deactivate EVENT_DAO
            CSAPI - -> NOTIFY_HANDLER: Return success
            deactivate CSAPI
        end
        NOTIFY_HANDLER -> CSAPI: Request Notification details for Participant - GET - HTTP://notifications/DFSP(n)
        activate CSAPI
        CSAPI -> NOTIFY_DAO: Fetch Notification details for Participant
        activate NOTIFY_DAO
        NOTIFY_DAO -> DB: Fetch Notification details for Participant
        activate DB
        deactivate DB
        NOTIFY_DAO - -> CSAPI: Return Notification details for Participant
        deactivate NOTIFY_DAO
        CSAPI - -> NOTIFY_HANDLER: Return Notification details for Participant
        deactivate CSAPI
        NOTIFY_HANDLER -> DFSP: HTTP Callback with Prepare result to Participant

    else Consume Batch Messages
        TOPIC_NOTIFICATIONS <- NOTIFY_HANDLER: <color #FF0000>**Consume Notifications event batch of messages for Participant**</color>
        activate TOPIC_NOTIFICATIONS
        deactivate TOPIC_NOTIFICATIONS
        group Persist batch Event Information
            NOTIFY_HANDLER -> CSAPI: Request to persist batch event information - POST - HTTP://events/
            activate CSAPI
            CSAPI -> EVENT_DAO: Request to persist batch event information
            activate EVENT_DAO
            EVENT_DAO -> DB: Persist event information
            activate DB
            deactivate DB
            EVENT_DAO - -> CSAPI: Return success
            deactivate EVENT_DAO
            CSAPI - -> NOTIFY_HANDLER: Return success
            deactivate CSAPI
        end
        loop for each message in batch
            NOTIFY_HANDLER -> CSAPI: Request Notifications details for Participant - GET - HTTP://notifications/DFPS(n)
            activate CSAPI
            CSAPI -> NOTIFY_DAO: Fetch Notifications details for Participant
            activate NOTIFY_DAO
            NOTIFY_DAO -> DB: Fetch Notifications details for Participant
            activate DB
            deactivate DB
            NOTIFY_DAO - -> CSAPI: Return Notifications details for Participant
            deactivate NOTIFY_DAO
            CSAPI - -> NOTIFY_HANDLER: Return Notifications details for Participant
            deactivate CSAPI
            NOTIFY_HANDLER -> DFSP: HTTP Callback with Prepare result to Participant
        end
    end
end
deactivate NOTIFY_HANDLER
@enduml

PlantUML version 1.2018.05(Sat May 05 23:00:17 EEST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_131-b11
Operating System: Mac OS X
OS Version: 10.13.4
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>