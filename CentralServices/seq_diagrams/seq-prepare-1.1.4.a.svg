<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="876px" preserveAspectRatio="none" style="width:1775px;height:876px;" version="1.1" viewBox="0 0 1775 876" width="1775px" zoomAndPan="magnify"><defs><filter height="300%" id="f1a2b28puh1se3" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="508" x="634" y="23.5352">1.1.4.a. Send notification to Participant (Payer/Payee) (single message)</text><rect fill="#D3D3D3" height="830.8535" style="stroke: #A80036; stroke-width: 1.0;" width="179" x="4" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="173" x="7" y="47.0566">Financial Service Provider</text><rect fill="#ADD8E6" height="830.8535" style="stroke: #A80036; stroke-width: 1.0;" width="241" x="370" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="157" x="412" y="47.0566">ML API Adapter Service</text><rect fill="#FFFFE0" height="830.8535" style="stroke: #A80036; stroke-width: 1.0;" width="1102" x="641" y="34.4883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="1141.5" y="47.0566">Central Service</text><rect fill="#FFFFFF" filter="url(#f1a2b28puh1se3)" height="588.5898" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="485.5" y="163.7754"/><rect fill="#FFFFFF" filter="url(#f1a2b28puh1se3)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="713.5" y="209.0859"/><rect fill="#FFFFFF" filter="url(#f1a2b28puh1se3)" height="198.8633" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1036.5" y="292.707"/><rect fill="#FFFFFF" filter="url(#f1a2b28puh1se3)" height="179.8633" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1036.5" y="527.8809"/><rect fill="#FFFFFF" filter="url(#f1a2b28puh1se3)" height="140.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1240.5" y="322.0176"/><rect fill="#FFFFFF" filter="url(#f1a2b28puh1se3)" height="121.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1363" y="557.1914"/><rect fill="#FFFFFF" filter="url(#f1a2b28puh1se3)" height="62.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1686" y="586.502"/><rect fill="#FFFFFF" filter="url(#f1a2b28puh1se3)" height="574.5898" style="stroke: #000000; stroke-width: 2.0;" width="1719" x="44" y="170.7754"/><rect fill="#FFFFFF" filter="url(#f1a2b28puh1se3)" height="245.4844" style="stroke: #000000; stroke-width: 2.0;" width="944" x="364" y="254.3965"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="93" x2="93" y1="153.7754" y2="762.3652"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="490" x2="490" y1="153.7754" y2="762.3652"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="718" x2="718" y1="153.7754" y2="762.3652"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1041.5" x2="1041.5" y1="153.7754" y2="762.3652"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1245" x2="1245" y1="153.7754" y2="762.3652"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1368" x2="1368" y1="153.7754" y2="762.3652"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1691" x2="1691" y1="153.7754" y2="762.3652"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="64" y="134.334">DFSP(n)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="54" y="150.8223">Participant</text><ellipse cx="93.5" cy="63.7988" fill="#FEFECE" filter="url(#f1a2b28puh1se3)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M93.5,71.7988 L93.5,98.7988 M80.5,79.7988 L106.5,79.7988 M93.5,98.7988 L80.5,113.7988 M93.5,98.7988 L106.5,113.7988 " fill="#FEFECE" filter="url(#f1a2b28puh1se3)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="64" y="774.9004">DFSP(n)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="54" y="791.3887">Participant</text><ellipse cx="93.5" cy="804.3418" fill="#FEFECE" filter="url(#f1a2b28puh1se3)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M93.5,812.3418 L93.5,839.3418 M80.5,820.3418 L106.5,820.3418 M93.5,839.3418 L80.5,854.3418 M93.5,839.3418 L106.5,854.3418 " fill="#FEFECE" filter="url(#f1a2b28puh1se3)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="227" x="374" y="150.8223">ML API Notification Event Handler</text><ellipse cx="490.5" cy="121.2871" fill="#FEFECE" filter="url(#f1a2b28puh1se3)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="486.5,109.2871,492.5,104.2871,490.5,109.2871,492.5,114.2871,486.5,109.2871" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="227" x="374" y="774.9004">ML API Notification Event Handler</text><ellipse cx="490.5" cy="793.8535" fill="#FEFECE" filter="url(#f1a2b28puh1se3)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="486.5,781.8535,492.5,776.8535,490.5,781.8535,492.5,786.8535,486.5,781.8535" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1a2b28puh1se3)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="649" y="114.2871"/><rect fill="#FEFECE" filter="url(#f1a2b28puh1se3)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="645" y="118.2871"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="652" y="138.8223">Notification-Topic</text><rect fill="#FEFECE" filter="url(#f1a2b28puh1se3)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="649" y="761.3652"/><rect fill="#FEFECE" filter="url(#f1a2b28puh1se3)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="645" y="765.3652"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="652" y="785.9004">Notification-Topic</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="974.5" y="150.8223">Central Service API</text><path d="M1021,109.2871 L1021,133.2871 M1021,121.2871 L1038,121.2871 " fill="#FEFECE" filter="url(#f1a2b28puh1se3)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="1050" cy="121.2871" fill="#FEFECE" filter="url(#f1a2b28puh1se3)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="128" x="974.5" y="774.9004">Central Service API</text><path d="M1021,781.8535 L1021,805.8535 M1021,793.8535 L1038,793.8535 " fill="#FEFECE" filter="url(#f1a2b28puh1se3)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="1050" cy="793.8535" fill="#FEFECE" filter="url(#f1a2b28puh1se3)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1a2b28puh1se3)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="1197" y="114.2871"/><rect fill="#FEFECE" filter="url(#f1a2b28puh1se3)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="1193" y="118.2871"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="1200" y="138.8223">Event-Topic</text><rect fill="#FEFECE" filter="url(#f1a2b28puh1se3)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="1197" y="761.3652"/><rect fill="#FEFECE" filter="url(#f1a2b28puh1se3)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="1193" y="765.3652"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="1200" y="785.9004">Event-Topic</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="1308" y="150.8223">Notification DAO</text><ellipse cx="1368" cy="121.2871" fill="#FEFECE" filter="url(#f1a2b28puh1se3)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1356" x2="1380" y1="135.2871" y2="135.2871"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="1308" y="774.9004">Notification DAO</text><ellipse cx="1368" cy="793.8535" fill="#FEFECE" filter="url(#f1a2b28puh1se3)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="1356" x2="1380" y1="807.8535" y2="807.8535"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1643" y="150.8223">Central Store</text><path d="M1673,101.2871 C1673,91.2871 1691,91.2871 1691,91.2871 C1691,91.2871 1709,91.2871 1709,101.2871 L1709,127.2871 C1709,137.2871 1691,137.2871 1691,137.2871 C1691,137.2871 1673,137.2871 1673,127.2871 L1673,101.2871 " fill="#FEFECE" filter="url(#f1a2b28puh1se3)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1673,101.2871 C1673,111.2871 1691,111.2871 1691,111.2871 C1691,111.2871 1709,111.2871 1709,101.2871 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1643" y="774.9004">Central Store</text><path d="M1673,787.8535 C1673,777.8535 1691,777.8535 1691,777.8535 C1691,777.8535 1709,777.8535 1709,787.8535 L1709,813.8535 C1709,823.8535 1691,823.8535 1691,823.8535 C1691,823.8535 1673,823.8535 1673,813.8535 L1673,787.8535 " fill="#FEFECE" filter="url(#f1a2b28puh1se3)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M1673,787.8535 C1673,797.8535 1691,797.8535 1691,797.8535 C1691,797.8535 1709,797.8535 1709,787.8535 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#f1a2b28puh1se3)" height="588.5898" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="485.5" y="163.7754"/><rect fill="#FFFFFF" filter="url(#f1a2b28puh1se3)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="713.5" y="209.0859"/><rect fill="#FFFFFF" filter="url(#f1a2b28puh1se3)" height="198.8633" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1036.5" y="292.707"/><rect fill="#FFFFFF" filter="url(#f1a2b28puh1se3)" height="179.8633" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1036.5" y="527.8809"/><rect fill="#FFFFFF" filter="url(#f1a2b28puh1se3)" height="140.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1240.5" y="322.0176"/><rect fill="#FFFFFF" filter="url(#f1a2b28puh1se3)" height="121.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1363" y="557.1914"/><rect fill="#FFFFFF" filter="url(#f1a2b28puh1se3)" height="62.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1686" y="586.502"/><rect fill="none" height="574.5898" style="stroke: #000000; stroke-width: 2.0;" width="1719" x="44" y="170.7754"/><polygon fill="#EEEEEE" points="44,170.7754,296,170.7754,296,177.7754,286,187.7754,44,187.7754,44,170.7754" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="207" x="59" y="184.3438">Send notification to Participant</text><polygon fill="#A80036" points="701.5,205.0859,711.5,209.0859,701.5,213.0859,705.5,209.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="495.5" x2="707.5" y1="209.0859" y2="209.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="502.5" y="204.6543">1</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="186" x="515.5" y="204.6543">Consume Notification event</text><rect fill="none" height="245.4844" style="stroke: #000000; stroke-width: 2.0;" width="944" x="364" y="254.3965"/><polygon fill="#EEEEEE" points="364,254.3965,579,254.3965,579,261.3965,569,271.3965,364,271.3965,364,254.3965" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="170" x="379" y="267.9648">Persist Event Information</text><polygon fill="#A80036" points="1024.5,288.707,1034.5,292.707,1024.5,296.707,1028.5,292.707" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="495.5" x2="1030.5" y1="292.707" y2="292.707"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="502.5" y="288.2754">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="393" x="515.5" y="288.2754">Request to persist event information - POST - HTTP://events/</text><polygon fill="#A80036" points="1228.5,318.0176,1238.5,322.0176,1228.5,326.0176,1232.5,322.0176" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1046.5" x2="1234.5" y1="322.0176" y2="322.0176"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1053.5" y="317.5859">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="1066.5" y="317.5859">Publish event information</text><rect fill="#FFFFFF" filter="url(#f1a2b28puh1se3)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="210" x="1190" y="355.3281"/><polygon fill="#EEEEEE" points="1190,355.3281,1254,355.3281,1254,362.3281,1244,372.3281,1190,372.3281,1190,355.3281" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1203" y="369.8965">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="198" x="1196" y="388.8965">Event Handler Consume {9.1.0.}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1200" y="404.207"/><polygon fill="#A80036" points="1057.5,458.2598,1047.5,462.2598,1057.5,466.2598,1053.5,462.2598" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1051.5" x2="1244.5" y1="462.2598" y2="462.2598"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1063.5" y="457.8281">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="1076.5" y="457.8281">Return success</text><polygon fill="#A80036" points="506.5,487.5703,496.5,491.5703,506.5,495.5703,502.5,491.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="500.5" x2="1040.5" y1="491.5703" y2="491.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="512.5" y="487.1387">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="525.5" y="487.1387">Return success</text><polygon fill="#A80036" points="1024.5,523.8809,1034.5,527.8809,1024.5,531.8809,1028.5,527.8809" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="495.5" x2="1030.5" y1="527.8809" y2="527.8809"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="502.5" y="523.4492">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="509" x="515.5" y="523.4492">Request Notification details for Participant - GET - HTTP://notifications/DFSP(n)</text><polygon fill="#A80036" points="1351,553.1914,1361,557.1914,1351,561.1914,1355,557.1914" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1046.5" x2="1357" y1="557.1914" y2="557.1914"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1053.5" y="552.7598">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="1066.5" y="552.7598">Fetch Notification details for Participant</text><polygon fill="#A80036" points="1674,582.502,1684,586.502,1674,590.502,1678,586.502" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1373" x2="1680" y1="586.502" y2="586.502"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1380" y="582.0703">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="1393" y="582.0703">Fetch Notification details for Participant</text><polygon fill="#FFFFE0" filter="url(#f1a2b28puh1se3)" points="1639,599.8125,1743,599.8125,1753,610.8125,1743,622.8125,1639,622.8125,1629,610.8125,1639,599.8125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="1641" y="616.3809">transferPosition</text><polygon fill="#A80036" points="1384,645.123,1374,649.123,1384,653.123,1380,649.123" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1378" x2="1690" y1="649.123" y2="649.123"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1390" y="644.6914">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="276" x="1403" y="644.6914">Retrieved Notification details for Participant</text><polygon fill="#A80036" points="1057.5,674.4336,1047.5,678.4336,1057.5,682.4336,1053.5,678.4336" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1051.5" x2="1367" y1="678.4336" y2="678.4336"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1063.5" y="674.002">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="259" x="1085.5" y="674.002">Return Notification details for Participant</text><polygon fill="#A80036" points="506.5,703.7441,496.5,707.7441,506.5,711.7441,502.5,707.7441" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="500.5" x2="1040.5" y1="707.7441" y2="707.7441"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="512.5" y="703.3125">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="259" x="534.5" y="703.3125">Return Notification details for Participant</text><polygon fill="#A80036" points="104.5,733.0547,94.5,737.0547,104.5,741.0547,100.5,737.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="98.5" x2="484.5" y1="737.0547" y2="737.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="110.5" y="732.623">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="300" x="132.5" y="732.623">HTTP Callback with Prepare result to Participant</text><!--
@startuml
' declate title
title 1.1.4.a. Send notification to Participant (Payer/Payee) (single message)

autonumber

' Actor Keys:
'   boundary - APIs/Interfaces, etc
'   collections - Kafka Topics
'   control - Kafka Consumers
'   entity - Database Access Objects
'   database - Database Persistance Store

' declare actors
actor "DFSP(n)\nParticipant" as DFSP
control "ML API Notification Event Handler" as NOTIFY_HANDLER
boundary "Central Service API" as CSAPI
collections "Notification-Topic" as TOPIC_NOTIFICATIONS
collections "Event-Topic" as TOPIC_EVENTS
entity "Notification DAO" as NOTIFY_DAO
database "Central Store" as DB

box "Financial Service Provider" #lightGray
	participant DFSP
end box

box "ML API Adapter Service" #LightBlue
	participant NOTIFY_HANDLER
end box

box "Central Service" #LightYellow
participant TOPIC_NOTIFICATIONS
    participant CSAPI
    participant TOPIC_EVENTS
    participant NOTIFY_DAO
    participant DB
end box

' start flow
activate NOTIFY_HANDLER
group Send notification to Participant
    TOPIC_NOTIFICATIONS <- NOTIFY_HANDLER: <color #FF0000>**Consume Notification event**</color>
    activate TOPIC_NOTIFICATIONS
    deactivate TOPIC_NOTIFICATIONS

    group Persist Event Information
        NOTIFY_HANDLER -> CSAPI: Request to persist event information - POST - HTTP://events/
        activate CSAPI
        CSAPI -> TOPIC_EVENTS: Publish event information
        activate TOPIC_EVENTS
        |||
        ref over TOPIC_EVENTS :  Event Handler Consume {9.1.0.} \n
        |||
        TOPIC_EVENTS - -> CSAPI: Return success
        deactivate TOPIC_EVENTS
        CSAPI - -> NOTIFY_HANDLER: Return success
        deactivate CSAPI
    end
    NOTIFY_HANDLER -> CSAPI: Request Notification details for Participant - GET - HTTP://notifications/DFSP(n)
    activate CSAPI
    CSAPI -> NOTIFY_DAO: Fetch Notification details for Participant
    activate NOTIFY_DAO
    NOTIFY_DAO -> DB: Fetch Notification details for Participant
    activate DB
    hnote over DB #lightyellow
        transferPosition
    end note
    DB -> NOTIFY_DAO: Retrieved Notification details for Participant
    deactivate DB
    NOTIFY_DAO - -> CSAPI: Return Notification details for Participant
    deactivate NOTIFY_DAO
    CSAPI - -> NOTIFY_HANDLER: Return Notification details for Participant
    deactivate CSAPI
    NOTIFY_HANDLER -> DFSP: HTTP Callback with Prepare result to Participant
end
deactivate NOTIFY_HANDLER
@enduml

PlantUML version 1.2017.18(Fri Oct 06 17:56:32 BST 2017)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_152-b16
Operating System: Mac OS X
OS Version: 10.13.4
Default Encoding: UTF-8
Language: en
Country: ZA
--></g></svg>